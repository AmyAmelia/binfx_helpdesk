<!DOCTYPE html>
{% extends 'helpdesk/base.html' %}
{% block content %}
<!-- button to link to new issue form -->
<div class = "container">
    <div class="btn-group btn-group-lg" role="group" aria-label="...">
        <a href="{% url 'issue_new' %}"><button type="button" class="btn btn-danger"> Raise New Issue</button></a>
    </div>
</div>
<!-- Table summarising the all raised issues -->
<div class = "container">
    <div class = "col-md-12">
        <h2> Issues Raised </h2>
            <table id="helpdesk_table" class="table table-striped table-bordered table-hover" cellspacing="0" width="100%">
                <thead>
                    <tr class="bg-info">
                        <th>ID</th>
                        <th>Type</th>
                        <th>Issue</th>
                        <th>Creator</th>
                        <th>Opened</th>
                        <th>Status</th>
                        <th>Is Urgent</th>
                        <th>Assignee</th>
                    </tr>
                </thead>
            <tbody>
            {% for issue in open %}
                <tr>
                    <td>{{ issue.id }}</td>
                    <td>{{ issue.type.type }}</td>
                    <td><a href="{% url 'issue_description' pk=issue.pk%}">{{ issue.issue }}</a></td>
                    <td>{{ issue.creator }}</td>
                    <td>{{ issue.open_date.date }}</td>
                    <td>{{ issue.status }}</td>
                    <td>{{ issue.is_urgent }}</td>
                    <td>{{ issue.assignee }}</td>
                </tr>
            {% endfor %}</tbody>
        </table>
    </div>
</div>
<!-- CDN Links to activate datatables with sorting functionallity -->
  <script src="//code.jquery.com/jquery-1.12.4.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap.min.css">
    <script src= "https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
    <script src= "https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap.min.js"></script>

<!-- run javascript to display datatable, order by Is_urgent column [8] -->
<script>
    $(document).ready(function () {
        $('#helpdesk_table').DataTable({responsive:true, order:[[6, "desc"]]})});
</script>
{% endblock %}

</body>

</html>